<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.KESNAYFERLYDDY.app.controllers.EmpleadoUsuarioController"
            stylesheets="@/styles/empleados_usuarios.css"
            prefWidth="1000" prefHeight="600">

    <top>
        <BorderPane styleClass="modal-header" prefHeight="50">
            <left>
                <VBox spacing="2">
                    <Label text="Administrar Roles y Permisos" styleClass="modal-title"/>
                    <Label text="Gestione los roles y permisos del sistema" styleClass="modal-subtitle"/>
                </VBox>
            </left>
            <right>
                <Button text="Cerrar" onAction="#accionCerrarModal" styleClass="btn-close"/>
            </right>
        </BorderPane>
    </top>

    <center>
        <HBox spacing="20" alignment="TOP_CENTER">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>

            <!-- Formulario de usuario (izquierda) -->
            <VBox spacing="12" prefWidth="480" styleClass="form-panel">
                <Label fx:id="lblTitulo" text="Usuario" styleClass="form-title"/>

                <VBox spacing="8" styleClass="form-field-full">
                    <Label text="Estado" styleClass="form-label"/>
                    <Label fx:id="lblEstadoUsuario" text="NO ASIGNADO" styleClass="form-input-full"/>
                </VBox>

                <VBox spacing="8" styleClass="form-field-full">
                    <Label text="Usuario" styleClass="form-label"/>
                    <TextField fx:id="txtUsername" promptText="Nombre de usuario" styleClass="form-input-full" HBox.hgrow="ALWAYS"/>
                </VBox>

                <VBox spacing="8" styleClass="form-field-full">
                    <Label text="Correo" styleClass="form-label"/>
                    <TextField fx:id="txtCorreo" promptText="correo@ejemplo.com" styleClass="form-input-full"/>
                </VBox>

                <VBox spacing="8" styleClass="form-field-full">
                    <Label text="Contraseña" styleClass="form-label"/>
                    <PasswordField fx:id="txtPassword" promptText="Contraseña" styleClass="form-input-full"/>
                </VBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Button fx:id="btnCrearEditar" text="Crear Usuario" onAction="#guardarUsuario" styleClass="button,primary"/>
                    <Button fx:id="btnEliminar" text="Eliminar Usuario" onAction="#eliminarUsuarioActual" styleClass="button,danger" disable="true"/>
                </HBox>
            </VBox>

            <!-- Panel de roles (derecha) -->
            <VBox spacing="12" prefWidth="480" styleClass="form-panel">
                <Label text="Roles asignados" styleClass="form-title"/>
                <VBox styleClass="table-container" VBox.vgrow="ALWAYS">
                    <TableView fx:id="tablaRolesAsignados" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colRolNombre" text="Rol" prefWidth="300" styleClass="table-column"/>
                            <TableColumn fx:id="colRolAccion" text="Acción" prefWidth="120" styleClass="table-column"/>
                        </columns>
                    </TableView>
                </VBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <ComboBox fx:id="comboRolesDisponibles" promptText="Seleccionar rol" styleClass="form-input-full" HBox.hgrow="ALWAYS"/>
                    <Button text="Asignar" onAction="#asignarRol" styleClass="button,primary"/>
                </HBox>
            </VBox>
        </HBox>
    </center>

    <bottom>
        <BorderPane styleClass="footer-panel" prefHeight="40">
            <left>
                <Label text="Sugerencia: clic derecho en un rol/permiso para acciones" styleClass="footer-text"/>
            </left>
        </BorderPane>
    </bottom>
</BorderPane>