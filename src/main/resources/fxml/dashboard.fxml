<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.KESNAYFERLYDDY.app.controllers.DashboardController"
            stylesheets="@/styles/dashboard.css"
            prefWidth="1400" prefHeight="800">
    
    <top>
        <BorderPane styleClass="navbar" prefHeight="70">
            <left>
                <HBox alignment="CENTER_LEFT" spacing="15">
                    <ImageView fitWidth="45" fitHeight="45" preserveRatio="true">
                        <image>
                            <Image url="@/images/Loguito.png" />
                        </image>
                    </ImageView>
                    <VBox spacing="2">
                        <Label text="MUEBLERÍA USO" styleClass="navbar-brand"/>
                        <Label text="Sistema Integral de Gestión" styleClass="navbar-subtitle"/>
                    </VBox>
                </HBox>
            </left>
            
            <right>
                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <VBox spacing="2" alignment="CENTER_RIGHT">
                        <Label text="Bienvenido," styleClass="user-info"/>
                        <Label fx:id="lblUser" text="Administrador" styleClass="user-info" 
                               style="-fx-font-weight: 700; -fx-font-size: 15px;"/>
                    </VBox>
                    <Button text="Cerrar Sesión" onAction="#onLogout" styleClass="btn-logout"/>
                </HBox>
            </right>
        </BorderPane>
    </top>
    
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="scroll-pane">
            <VBox alignment="TOP_CENTER" spacing="30" styleClass="dashboard">
                <VBox spacing="8" alignment="CENTER">
                    <Label text="Panel de Control Principal" styleClass="dashboard-title"/>
                    <Label text="Gestione todos los aspectos de su mueblería desde un solo lugar" 
                        styleClass="dashboard-subtitle"/>
                </VBox>
                
                <!-- GridPane para Administrador (todas las tarjetas) -->
                <GridPane fx:id="gridAdmin" styleClass="card-grid" alignment="CENTER" prefHeight="600">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="50" halignment="CENTER" hgrow="ALWAYS"/>
                        <ColumnConstraints percentWidth="50" halignment="CENTER" hgrow="ALWAYS"/>
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints valignment="CENTER" vgrow="ALWAYS"/>
                        <RowConstraints valignment="CENTER" vgrow="ALWAYS"/>
                    </rowConstraints>

                    <Button fx:id="btnClientes" onAction="#onOpenClientes" 
                        styleClass="card-button card-clientes" 
                        GridPane.columnIndex="0" GridPane.rowIndex="0"
                        GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"
                        minWidth="0" maxWidth="Infinity">
                        <graphic>
                            <HBox styleClass="card-content" spacing="20" alignment="CENTER_LEFT">
                                <ImageView fitWidth="90" fitHeight="90" styleClass="card-icon">
                                    <image>
                                        <Image url="@/images/clientesdash.png" />
                                    </image>
                                </ImageView>
                                <VBox spacing="15" alignment="CENTER_LEFT">
                                    <HBox spacing="20" alignment="CENTER_LEFT">
                                        <Label text="Clientes" styleClass="card-title"/>
                                        <Label fx:id="lblClientesCount" text="0" styleClass="card-count"/>
                                    </HBox>
                                    <Label text="Gestione la base de datos de clientes, historial de compras, información de contacto y segmentación de clientes."
                                        styleClass="card-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </graphic>
                    </Button>
                    
                    <Button fx:id="btnEmpleados" onAction="#onOpenEmpleados" 
                        styleClass="card-button card-empleados" 
                        GridPane.columnIndex="1" GridPane.rowIndex="0"
                        GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"
                        minWidth="0" maxWidth="Infinity">
                        <graphic>
                            <HBox styleClass="card-content" spacing="20" alignment="CENTER_LEFT">
                                <ImageView fitWidth="90" fitHeight="90" styleClass="card-icon">
                                    <image>
                                        <Image url="@/images/empleadosdash.png" />
                                    </image>
                                </ImageView>
                                <VBox spacing="15" alignment="CENTER_LEFT">
                                    <HBox spacing="20" alignment="CENTER_LEFT">
                                        <Label text="Empleados" styleClass="card-title"/>
                                        <Label fx:id="lblUsuariosCount" text="0" styleClass="card-count"/>
                                    </HBox>
                                    <Label text="Administre el personal, permisos, horarios, información laboral y desempeño de los empleados."
                                        styleClass="card-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </graphic>
                    </Button>

                    <Button fx:id="btnVentas" onAction="#onOpenVentas" 
                        styleClass="card-button card-ventas" 
                        GridPane.columnIndex="0" GridPane.rowIndex="1"
                        GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"
                        minWidth="0" maxWidth="Infinity">
                        <graphic>
                            <HBox styleClass="card-content" spacing="20" alignment="CENTER_LEFT">
                                <ImageView fitWidth="90" fitHeight="90" styleClass="card-icon">
                                    <image>
                                        <Image url="@/images/ventasdash.png" />
                                    </image>
                                </ImageView>
                                <VBox spacing="15" alignment="CENTER_LEFT">
                                    <HBox spacing="20" alignment="CENTER_LEFT">
                                        <Label text="Ventas" styleClass="card-title"/>
                                        <Label fx:id="lblVentasCount" text="0" styleClass="card-count"/>
                                    </HBox>
                                    <Label text="Controle ventas, facturación, reportes financieros, análisis de rendimiento y métricas comerciales."
                                        styleClass="card-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </graphic>
                    </Button>
                    
                    <Button fx:id="btnProductos" onAction="#onOpenProductos" 
                        styleClass="card-button card-productos" 
                        GridPane.columnIndex="1" GridPane.rowIndex="1"
                        GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"
                        minWidth="0" maxWidth="Infinity">
                        <graphic>
                            <HBox styleClass="card-content" spacing="20" alignment="CENTER_LEFT">
                                <ImageView fitWidth="90" fitHeight="90" styleClass="card-icon">
                                    <image>
                                        <Image url="@/images/mueblesdash.png" />
                                    </image>
                                </ImageView>
                                <VBox spacing="15" alignment="CENTER_LEFT">
                                    <HBox spacing="20" alignment="CENTER_LEFT">
                                        <Label text="Inventario" styleClass="card-title"/>
                                        <Label fx:id="lblProductosCount" text="0" styleClass="card-count"/>
                                    </HBox>
                                    <Label text="Administre el inventario de muebles, categorías, precios, niveles de stock y control de existencias."
                                        styleClass="card-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </graphic>
                    </Button>
                </GridPane>

                <!-- GridPane para Vendedor (solo Ventas e Inventario) -->
                <GridPane fx:id="gridVendedor" styleClass="card-grid" alignment="CENTER" prefHeight="600" visible="false" managed="false">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="50" halignment="CENTER" hgrow="ALWAYS"/>
                        <ColumnConstraints percentWidth="50" halignment="CENTER" hgrow="ALWAYS"/>
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints percentHeight="100" valignment="CENTER" vgrow="ALWAYS" prefHeight="300"/>
                    </rowConstraints>

                    <Button fx:id="btnVentasVendedor" onAction="#onOpenVentas" 
                        styleClass="card-button card-ventas" 
                        GridPane.columnIndex="0" GridPane.rowIndex="0"
                        GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"
                        minWidth="0" maxWidth="Infinity">
                        <graphic>
                            <HBox styleClass="card-content" spacing="20" alignment="CENTER_LEFT">
                                <ImageView fitWidth="90" fitHeight="90" styleClass="card-icon">
                                    <image>
                                        <Image url="@/images/ventasdash.png" />
                                    </image>
                                </ImageView>
                                <VBox spacing="15" alignment="CENTER_LEFT">
                                    <HBox spacing="20" alignment="CENTER_LEFT">
                                        <Label text="Ventas" styleClass="card-title"/>
                                        <Label fx:id="lblVentasCountVendedor" text="0" styleClass="card-count"/>
                                    </HBox>
                                    <Label text="Controle ventas, facturación, reportes financieros, análisis de rendimiento y métricas comerciales."
                                        styleClass="card-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </graphic>
                    </Button>
                    
                    <Button fx:id="btnProductosVendedor" onAction="#onOpenProductos" 
                        styleClass="card-button card-productos" 
                        GridPane.columnIndex="1" GridPane.rowIndex="0"
                        GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"
                        minWidth="0" maxWidth="Infinity">
                        <graphic>
                            <HBox styleClass="card-content" spacing="20" alignment="CENTER_LEFT">
                                <ImageView fitWidth="90" fitHeight="90" styleClass="card-icon">
                                    <image>
                                        <Image url="@/images/mueblesdash.png" />
                                    </image>
                                </ImageView>
                                <VBox spacing="15" alignment="CENTER_LEFT">
                                    <HBox spacing="20" alignment="CENTER_LEFT">
                                        <Label text="Inventario" styleClass="card-title"/>
                                        <Label fx:id="lblProductosCountVendedor" text="0" styleClass="card-count"/>
                                    </HBox>
                                    <Label text="Administre el inventario de muebles, categorías, precios, niveles de stock y control de existencias."
                                        styleClass="card-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </graphic>
                    </Button>
                </GridPane>

                <HBox spacing="30" alignment="CENTER" prefHeight="800">
                    <VBox styleClass="chart-container" spacing="15" HBox.hgrow="ALWAYS" prefHeight="800">
                        <Label text="Ventas del Mes" styleClass="chart-title"/>
                        <LineChart fx:id="lineChartVentas" animated="false" prefHeight="700" styleClass="large-chart">
                            <xAxis><CategoryAxis label="Día del Mes"/></xAxis>
                            <yAxis><NumberAxis label="Total Ventas ($)"/></yAxis>
                        </LineChart>
                    </VBox>
                    <VBox styleClass="chart-container" spacing="15" HBox.hgrow="ALWAYS" prefHeight="800">
                        <Label text="Top 10 Muebles Más Vendidos" styleClass="chart-title"/>
                        <BarChart fx:id="barChartMuebles" animated="false" prefHeight="700" styleClass="large-chart">
                            <xAxis><CategoryAxis label="Mueble"/></xAxis>
                            <yAxis><NumberAxis label="Cantidad Vendida"/></yAxis>
                        </BarChart>
                    </VBox>
                </HBox>
                
                <Label text="Mueblería Uso © 2024 - Sistema desarrollado con JavaFX" 
                    styleClass="footer"/>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>